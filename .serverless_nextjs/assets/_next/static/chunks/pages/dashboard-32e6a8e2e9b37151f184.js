(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{87175:function(e,n,t){"use strict";var r=t(14670),a=t(282);n.Z=(0,r.Z)((function(e){return{root:{borderRadius:0,fontWeight:e.typography.fontWeightMedium,fontFamily:e.typography.fontFamilySecondary,padding:e.spacing(2,4),fontSize:e.typography.pxToRem(14),boxShadow:"none","&:active, &:focus":{boxShadow:"none"}},sizeSmall:{padding:e.spacing(1,3),fontSize:e.typography.pxToRem(13)},sizeLarge:{padding:e.spacing(2,5),fontSize:e.typography.pxToRem(16)}}}))(a.Z)},95015:function(e,n,t){"use strict";t.d(n,{ZP:function(){return F}});var r=t(809),a=t.n(r),i=t(92447),o=t(64121),s=t(26265),c=t(85893),l=t(67294),d=t(11163),u=t(86010),h=t(41120),p=t(75834),g=t(39636),f=t(99956),m=t(45258),x=t(28358),v=t(62822),j=t(22318),Z=t(55517),b=t(17812),y=t(43832),w=t(41749),S=t(89659),C=t(48884),k=t(89875),O=t(87175),D=t(50998),P=t(46869),E=t(95757),R=t(96837),T=t(50442),N=t(83905),I=t(44152),A=t(41664),L=(0,c.jsxs)("div",{children:[(0,c.jsx)(A.default,{href:"/dashboard",children:(0,c.jsxs)(D.Z,{button:!0,children:[(0,c.jsx)(P.Z,{children:(0,c.jsx)(T.Z,{})}),(0,c.jsx)(E.Z,{primary:"Management Reserved"})]})}),(0,c.jsx)(A.default,{href:"/dashboard/calendar",children:(0,c.jsxs)(D.Z,{button:!0,children:[(0,c.jsx)(P.Z,{children:(0,c.jsx)(N.Z,{})}),(0,c.jsx)(E.Z,{primary:"Calendars Reserved"})]})})]}),B=(R.Z,D.Z,P.Z,I.Z,E.Z,D.Z,P.Z,I.Z,E.Z,D.Z,P.Z,I.Z,E.Z,t(75808)),M=t(95477);function z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?z(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Y=(0,l.createContext)();Y.Provider,Y.Consumer;function W(){return(0,c.jsxs)(j.Z,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",(0,c.jsx)(S.Z,{color:"inherit",href:"www.thaivintagewhitchurch.co.uk",children:"Thai Vintage Whitchurch"})," ",(new Date).getFullYear(),"."]})}var G=(0,h.Z)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:_({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),backgroundColor:"#e48c4ee0"},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:(0,s.Z)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},button:{color:e.palette.common.black,border:"2px solid #000","&:hover":{backgroundColor:"white"}},imageDraw:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",marginTop:e.spacing(3),marginBottom:e.spacing(3)}}}));function F(e){var n=G(),t=l.useState(!0),r=(0,o.Z)(t,2),s=r[0],h=r[1],S=(0,l.useState)(null),D=S[0],P=S[1],E=(0,l.useState)(!1),R=E[0],T=E[1],N=(0,l.useState)(!1),I=N[0],A=N[1],z=(0,l.useState)(!0),_=z[0],Y=z[1],F=(0,l.useState)(!1),H=F[0],U=F[1],X=(0,l.useState)(!1),V=X[0],q=X[1],K=["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"];(0,l.useEffect)((function(){null!==D&&!0===R||null===D&&!0===R&&d.default.push("/login")}),[D,R]),(0,l.useEffect)((function(){Q()}),[]);var Q=function(){var e=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.T)();case 2:e.sent.auth().onAuthStateChanged((function(e){e?(P(e.email),T(!0),U(!0)):(P(null),T(!0))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.T)();case 2:e.sent.auth().signOut().then((function(){return P(null)})).catch((function(e){return console.log(e.message)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){$()}),[]);var $=function(){gapi.load("client",(function(){gapi.client.init({apiKey:"AIzaSyBhH47ELc9gEXMVlraQSskoV7X7_01Dn_Q",clientId:"468408425438-obcg1t2i7tbgh1089avslst12k5bs7vt.apps.googleusercontent.com",discoveryDocs:K,scope:"https://www.googleapis.com/auth/calendar"}).then((function(){gapi.auth2.getAuthInstance().isSignedIn.listen(ee),q(!0),gapi.auth2.getAuthInstance().isSignedIn.get()?A(!0):ne()})).catch((function(e){console.log(e)}))}))},ee=function(e){A(e)},ne=function(){gapi.auth2.getAuthInstance().signIn()};return(0,c.jsxs)("div",{className:n.root,children:[(0,c.jsx)(p.ZP,{}),(0,c.jsx)(m.Z,{position:"absolute",className:(0,u.Z)(n.appBar,s&&n.appBarShift),children:(0,c.jsxs)(x.Z,{className:n.toolbar,children:[(0,c.jsx)(b.Z,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){h(!0),Y(!0)},className:(0,u.Z)(n.menuButton,s&&n.menuButtonHidden),children:(0,c.jsx)(C.Z,{})}),(0,c.jsx)(j.Z,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:n.title}),(0,c.jsx)(O.Z,{className:n.button,onClick:J,children:"Logout"})]})}),(0,c.jsxs)(g.ZP,{variant:"permanent",classes:{paper:(0,u.Z)(n.drawerPaper,!s&&n.drawerPaperClose)},open:s,children:[(0,c.jsx)("div",{className:n.toolbarIcon,children:(0,c.jsx)(b.Z,{onClick:function(){h(!1),Y(!1)},children:(0,c.jsx)(k.Z,{})})}),_?(0,c.jsxs)("div",{className:n.imageDraw,children:[(0,c.jsx)("img",{src:"/images/thaivintagewhitchurch-logo.png",alt:"thaivintagewhitchurch-logo",style:{width:120,height:120,borderRadius:"50%",overflow:"hidden",marginTop:"-20%"}}),(0,c.jsx)(j.Z,{variant:"h5",color:"secondary",style:{marginTop:20,marginBottom:20},children:"Welcome"}),D]}):null,(0,c.jsx)(Z.Z,{}),(0,c.jsx)(v.Z,{children:L})]}),(0,c.jsxs)("main",{className:n.content,children:[(0,c.jsx)("div",{className:n.appBarSpacer}),(0,c.jsxs)(y.Z,{maxWidth:"lg",className:n.container,children:[(0,c.jsx)(w.Z,{container:!0,spacing:3,style:{display:"flex",justifyContent:"center"},children:H?D?V?I?e.children:(0,c.jsxs)("div",{style:{textAlign:"center",border:"1px solid",padding:20},children:[(0,c.jsx)("h2",{children:"Please Login Google Autherication"}),(0,c.jsx)(O.Z,{variant:"contained",color:"secondary",style:{marginTop:50},onClick:ne,children:"Login Google"})]}):(0,c.jsx)(M.Z,{disableShrink:!0}):(0,c.jsx)("h5",{style:{textAlign:"center"},children:"Redirect to Login page "}):(0,c.jsx)(M.Z,{disableShrink:!0})}),(0,c.jsx)(f.Z,{pt:4,children:(0,c.jsx)(W,{})})]})]})]})}},64812:function(e,n,t){"use strict";var r=t(26265),a=t(85893),i=t(38347),o=(t(67294),t(14670)),s=t(93871),c=t(22318);function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var u={h1:"h1",h2:"h1",h3:"h1",h4:"h1",h5:"h3",h6:"h2",subtitle1:"h3"};n.Z=(0,o.Z)((function(e){return{markedH2Center:{height:4,width:73,display:"block",margin:"".concat(e.spacing(1),"px auto 0"),backgroundColor:e.palette.secondary.main},markedH3Center:{height:4,width:55,display:"block",margin:"".concat(e.spacing(1),"px auto 0"),backgroundColor:e.palette.secondary.main},markedH4Center:{height:4,width:55,display:"block",margin:"".concat(e.spacing(1),"px auto 0"),backgroundColor:e.palette.secondary.main},markedH6Left:{height:2,width:28,display:"block",marginTop:e.spacing(.5),background:"currentColor"}}}))((function(e){var n=e.children,t=e.classes,r=e.marked,o=void 0!==r&&r,l=e.variant,h=(0,i.Z)(e,["children","classes","marked","variant"]);return(0,a.jsxs)(c.Z,d(d({variantMapping:u,variant:l},h),{},{children:[n,o?(0,a.jsx)("span",{className:t["marked".concat((0,s.Z)(l)+(0,s.Z)(o))]}):null]}))}))},75808:function(e,n,t){"use strict";t.d(n,{T:function(){return o}});var r=t(81923),a=t.n(r),i=(t(96257),t(16690),t(34155)),o=function(){var e={apiKey:"AIzaSyB1w1R1YpWx1oD_3FjZBwXQgs-S37oS0yA",authDomain:"thaivintagewhitchurch.firebaseapp.com",databaseURL:"https://thaivintagewhitchurch.firebaseio.com",projectId:"thaivintagewhitchurch",storageBucket:"thaivintagewhitchurch.appspot.com",messagingSenderId:i.env.FIREBASE_MESSAGING_SENDER_ID};return a().apps.length||(a().initializeApp(e),a().auth()),a()}},91062:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ce}});var r=t(809),a=t.n(r),i=t(26265),o=t(92447),s=t(85893),c=t(59999),l=t(67294),d=t(95015),u=(t(11163),t(75808)),h=t(14670),p=t(41120),g=t(59693),f=t(82302),m=t(99613),x=t(88222),v=t(56847),j=t(83750),Z=t(57394),b=t(64812),y=t(40234),w=t(79895),S=t(85639),C=t(64436),k=t(26209),O=t(43700),D=t(14741),P=t(74348),E=t(88995),R=t(87827),T=t(25978),N=t(38347),I=t(282),A=t(52663),L=t(66083),B=t(29525),M=t(66856),z=t(17812),_=t(80366),Y=t(9669),W=t.n(Y),G=t(27577);function F(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function H(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?F(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var U=(0,h.Z)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var n=e.children,t=e.classes,r=e.onClose,a=(0,N.Z)(e,["children","classes","onClose"]);return(0,s.jsxs)(L.Z,H(H({disableTypography:!0,className:t.root},a),{},{children:[(0,s.jsx)(b.Z,{variant:"h6",children:n}),r?(0,s.jsx)(z.Z,{"aria-label":"close",className:t.closeButton,onClick:r,children:(0,s.jsx)(_.Z,{})}):null]}))})),X=(0,h.Z)((function(e){return{root:{padding:e.spacing(2)}}}))(B.Z),V=(0,h.Z)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(M.Z),q=function(e){var n=(0,l.useState)(!1),t=n[0],r=n[1],i=(0,G.Ds)().enqueueSnackbar,c=function(e,n){i("SUCCESS ".concat(n),{variant:e})},d=function(e){e.preventDefault(),r(!1)},h=function(){var e=(0,o.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),p();case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),p=function(){var n=(0,o.Z)(a().mark((function n(){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,u.T)();case 2:t=n.sent,gapi.client.calendar.events.insert({calendarId:"thaivintagewhitchurch.co.uk_ert6u9r95pcadm2d73fsr1f78k@group.calendar.google.com",resource:{summary:"".concat(e.name," | ").concat(e.email),location:"Old Mill Park Avenue Park Avenue, Whitchurch SY13 1SH, United Kingdom",description:"Name : ".concat(e.name,", Email : ").concat(e.email,", People : ").concat(e.numberGuest,", Remark : ").concat(e.remark," "),start:{dateTime:"".concat(e.reserveDate,"T").concat(e.reserveTime,":00.000Z"),timeZone:"Europe/London"},end:{dateTime:"".concat(e.reserveDate,"T").concat(e.reserveTime,":00.000Z"),timeZone:"Europe/London"}}}).then((function(n){c("success","ADD CALENDAR"),t.firestore().collection("reservation").doc(e.id).update({confirm:"confirm",calendarId:n.result.id}).then((function(n){W().post("https://thaivintagewhitchurch-268910.appspot.com/api",{email:e.email,name:e.name,people:e.numberGuest,timeReserve:e.reserveDate,dateReserve:e.reserveTime})})).then((function(){c("success","ACCEPT & EMAIL")})).catch((function(e){c("error","ERROR SYSTEM")}))})).catch((function(e){c("error","ERROR ADD CALENDAR")}));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),g=function(){var n=(0,o.Z)(a().mark((function n(){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,u.T)();case 2:t=n.sent,gapi.client.calendar.events.delete({calendarId:"thaivintagewhitchurch.co.uk_ert6u9r95pcadm2d73fsr1f78k@group.calendar.google.com",eventId:e.calendar}).then((function(n){c("warning","| DELETED"),t.firestore().collection("reservation").doc(e.id).update({confirm:"cancel"}).then((function(){c("success","CANCEL A RESERVED")})).catch((function(e){c("error","ERROR SYSTEM")}))}));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,s.jsxs)("div",{children:[(0,s.jsx)(I.Z,{variant:"outlined",color:"primary",onClick:function(e){e.preventDefault(),r(!0)},children:"Open"}),(0,s.jsxs)(A.Z,{onClose:d,"aria-labelledby":"customized-dialog-title",open:t,children:[(0,s.jsx)(U,{id:"customized-dialog-title",onClose:d,children:"Reserve Details"}),(0,s.jsx)(X,{dividers:!0,children:(0,s.jsx)(v.Z,{component:w.Z,children:(0,s.jsxs)(f.Z,{style:{width:"100%"},"aria-label":"simple table",children:[(0,s.jsx)(j.Z,{children:(0,s.jsx)(Z.Z,{})}),(0,s.jsxs)(m.Z,{children:[(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(x.Z,{children:"Reserve Number"}),(0,s.jsx)(x.Z,{children:e.id})]}),(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(x.Z,{children:"Guest Name"}),(0,s.jsx)(x.Z,{children:e.name})]}),(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(x.Z,{children:"E-Mail"}),(0,s.jsx)(x.Z,{children:e.email})]}),(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(x.Z,{children:"Contact Number"}),(0,s.jsx)(x.Z,{children:e.contact})]}),(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(x.Z,{children:"Number of Guest"}),(0,s.jsx)(x.Z,{children:e.numberGuest})]}),(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(x.Z,{children:"Reserve Date"}),(0,s.jsx)(x.Z,{children:e.reserveDate})]}),(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(x.Z,{children:"Reserve Time"}),(0,s.jsx)(x.Z,{children:e.reserveTime})]}),(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(x.Z,{children:"Promotion"}),(0,s.jsx)(x.Z,{children:"Promotion"})]}),(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(x.Z,{children:"Reserve Status"}),(0,s.jsx)(x.Z,{children:e.reserveStatus})]}),(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(x.Z,{children:"Remark"}),(0,s.jsx)(x.Z,{children:e.remark})]})]})]})})}),(0,s.jsx)(V,{children:"Waiting"===e.reserveStatus?(0,s.jsx)("div",{children:(0,s.jsx)(I.Z,{autoFocus:!0,onClick:h,variant:"outlined",color:"primary",style:{backgroundColor:"green",margin:5},children:"Accept"})}):"Confirmed"===e.reserveStatus?(0,s.jsx)("div",{children:(0,s.jsx)(I.Z,{autoFocus:!0,onClick:g,variant:"outlined",color:"primary",style:{backgroundColor:"#f09751",margin:5},children:"Cancel Reserve"})}):null})]})]})},K=t(5582),Q=t.n(K),J=t(83461),$=(0,h.Z)((function(e){return{head:{backgroundColor:e.palette.common.white,color:e.palette.common.black,fontSize:12},body:{fontSize:14}}}))(x.Z),ee=(0,h.Z)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}}))(Z.Z),ne=(0,p.Z)((function(e){return{table:{width:1280},form:{"& > *":{margin:e.spacing(1),width:300}}}})),te=(0,h.Z)((function(e){return{root:{"label + &":{marginTop:e.spacing(3)}},input:{borderRadius:4,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",fontSize:16,padding:"10px 26px 10px 12px",transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderRadius:4,borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}}}}))(D.Z),re=(0,p.Z)((function(e){var n;return{root:{display:"flex",flexDirection:"column"},title:{marginTop:e.spacing(3)},margin:{margin:e.spacing(2)},reservationBox:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:e.spacing(3)},paper:{width:"100%",marginBottom:e.spacing(2)},headerTable:{display:"flex",alignItems:"center",marginTop:e.spacing(2),marginLeft:e.spacing(2)},inputRoot:{color:"inherit"},inputInput:(0,i.Z)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200}),search:(n={position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:(0,g.U1)(e.palette.common.black,.15),"&:hover":{backgroundColor:(0,g.U1)(e.palette.common.black,.25)},marginLeft:0,width:"100%"},(0,i.Z)(n,e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),(0,i.Z)(n,"margin",e.spacing(1)),n),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},headerTitle:(0,i.Z)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),button:{marginTop:e.spacing(3)}}})),ae=function(e){var n=(0,l.useState)(0),t=n[0],r=n[1],a=(0,l.useState)(10),i=a[0],o=a[1],d=(0,l.useState)([]),u=d[0],h=d[1],p=(0,l.useState)([]),g=p[0],x=p[1],N=(0,l.useState)([]),A=N[0],L=N[1],B=(0,l.useState)(!1),M=B[0],z=B[1],_=(0,l.useState)(""),Y=_[0],W=_[1],G=(0,l.useState)("Waiting"),F=G[0],H=G[1],U=ne(),X=re(),V=(0,l.useState)(null),K=V[0],ae=V[1];(0,l.useEffect)((function(){L((0,c.Z)(u))}),[u]),(0,l.useEffect)((function(){var e=(0,c.Z)(g);h(e.slice(i*t,i*(t+1)))}),[t,i,g]),(0,l.useEffect)((function(){var e=(0,c.Z)(g),n=[];e.length>0&&(n=e.filter((function(e){return e.name.toLowerCase().includes(Y.toLowerCase())||e.email.toLowerCase().includes(Y.toLowerCase())||e.contact.toLowerCase().includes(Y.toLowerCase())||e.reserveDate.toLowerCase().includes(Y.toLowerCase())||e.reserveTime.toLowerCase().includes(Y.toLowerCase())}))),h(n),L(n)}),[Y]),(0,l.useEffect)((function(){var e=(0,c.Z)(g),n=[];e.length>0&&null!=K&&(n=e.filter((function(e){return e.reserveDate===Q()(K,"llll").format("YYYY-MM-DD")})),h(n),L(payout))}),[K]),(0,l.useEffect)((function(){var n=(0,c.Z)(e.data),t=[];n.length>0&&(t=n.filter((function(e){return e.reserveStatus.includes("All"===F?"":F)}))),x(t),L(t)}),[F,e.data,M]);return(0,s.jsx)(l.Fragment,{children:(0,s.jsxs)("section",{className:X.root,children:[(0,s.jsx)(b.Z,{variant:"h4",className:X.title,children:"Reservation Management"}),(0,s.jsxs)("div",{className:X.reservationBox,children:[(0,s.jsx)(b.Z,{variant:"h5",className:X.title,children:"Reserve Status :"}),(0,s.jsxs)(C.Z,{className:X.margin,children:[(0,s.jsx)(O.Z,{id:"demo-customized-select-label",children:"Reserve Status"}),(0,s.jsxs)(k.Z,{labelId:"demo-customized-select-label",id:"demo-customized-select",input:(0,s.jsx)(te,{}),style:{width:250},placeholder:"Reserve Status",value:F,onChange:function(e){e.preventDefault(),ae(null),H(e.target.value)},children:[(0,s.jsx)(S.Z,{value:"All",children:(0,s.jsx)("em",{children:"All"})}),(0,s.jsx)(S.Z,{value:"Waiting",children:(0,s.jsx)("em",{children:"Waiting Confirm"})}),(0,s.jsx)(S.Z,{value:"Confirmed",children:(0,s.jsx)("em",{children:"Confirmed"})}),(0,s.jsx)(S.Z,{value:"Cancel",children:(0,s.jsx)("em",{children:"Reserve Cancel"})})]})]}),(0,s.jsx)(I.Z,{variant:"outlined",size:"large",color:"secondary",className:X.button,onClick:function(e){e.preventDefault(),W(""),ae(null),H("Waiting"),z(!M)},children:"Clear Filter"})]}),(0,s.jsxs)("div",{className:X.reservationBox,children:[(0,s.jsx)(b.Z,{variant:"h5",className:X.title,children:"Reserve Date :"}),(0,s.jsx)(R.M,{utils:P.Z,children:(0,s.jsx)(T.e,{margin:"normal",id:"date-picker-dialog",label:"Date picker dialog",format:"MM/dd/yyyy",value:K,onChange:function(e){ae(e)},KeyboardButtonProps:{"aria-label":"change date"},style:{marginLeft:30}})})]}),(0,s.jsxs)(w.Z,{className:X.paper,children:[(0,s.jsxs)("div",{className:X.headerTable,children:[(0,s.jsx)("div",{className:X.headerTitle,children:(0,s.jsx)(b.Z,{variant:"h4",children:"Thai Vintage Whitchurch"})}),(0,s.jsx)(I.Z,{variant:"outlined",color:"inherit",children:(0,s.jsx)(J.CSVLink,{data:A,style:{textDecoration:"none",color:"#000"},children:"Download CSV"})}),(0,s.jsxs)("div",{className:X.search,children:[(0,s.jsx)("div",{className:X.searchIcon,children:(0,s.jsx)(E.Z,{})}),(0,s.jsx)(D.Z,{placeholder:"Search\u2026",classes:{root:X.inputRoot,input:X.inputInput},inputProps:{"aria-label":"search"},value:Y,onChange:function(e){return W(e.target.value)}})]})]}),(0,s.jsx)(v.Z,{children:(0,s.jsxs)(f.Z,{className:U.table,"aria-label":"customized table",children:[(0,s.jsx)(j.Z,{children:(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)($,{children:"Management"}),(0,s.jsx)($,{children:"Reserve No"}),(0,s.jsx)($,{align:"right",children:"Guest Name"}),(0,s.jsx)($,{align:"right",children:"E-Mail"}),(0,s.jsx)($,{align:"right",children:"Contact No."}),(0,s.jsx)($,{align:"right",children:"Guest No."}),(0,s.jsx)($,{align:"right",children:"Reserve Date"}),(0,s.jsx)($,{align:"right",children:"Reserve Time"}),(0,s.jsx)($,{align:"right",children:"Reserve Status"})]})}),(0,s.jsx)(m.Z,{children:u.map((function(e){return(0,s.jsxs)(ee,{children:[(0,s.jsx)($,{component:"th",scope:"row",children:(0,s.jsx)(q,{id:e.id,name:e.name,email:e.email,contact:e.contact,numberGuest:e.guestno,reserveDate:e.reserveDate,reserveTime:e.reserveTime,reserveStatus:e.reserveStatus,remark:e.request})}),(0,s.jsx)($,{component:"th",scope:"row",children:e.id}),(0,s.jsx)($,{align:"right",children:e.name}),(0,s.jsx)($,{align:"right",children:e.email}),(0,s.jsx)($,{align:"right",children:e.contact}),(0,s.jsx)($,{align:"right",children:e.guestno}),(0,s.jsx)($,{align:"right",children:e.reserveDate}),(0,s.jsx)($,{align:"right",children:e.reserveTime}),(0,s.jsx)($,{align:"right",children:(0,s.jsx)(I.Z,{variant:"outlined",disabled:!0,children:e.reserveStatus})})]},e.name)}))})]})}),(0,s.jsx)(y.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:g.length,rowsPerPage:i,page:t,onChangePage:function(e,n){e.preventDefault(),r(n)},onChangeRowsPerPage:function(e){o(parseInt(e.target.value,10)),r(0)}})]})]})})};function ie(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function oe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ie(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ie(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var se=function(e){var n=(0,l.useState)([]),t=n[0],r=n[1];return(0,l.useEffect)((function(){var e=(0,u.T)().firestore().collection("reservation").orderBy("date","asc").onSnapshot((function(e){var n=[];e.forEach((function(e){n.push({id:e.id,name:e.data().name,email:e.data().email,contact:e.data().contact,guestno:e.data().people,reserveDate:Q()(e.data().date.seconds,"X").format("YYYY-MM-DD"),reserveTime:e.data().time,promotion:"",reserveStatus:"confirm"===e.data().confirm?"Confirmed":"waiting"===e.data().confirm?"Waiting":"Canceled",request:e.data().request,calendar:e.data().calendarId})}));var a=[].concat((0,c.Z)(t),n);r(a)}));return function(){e()}}),[]),(0,l.useEffect)((function(){var n=(0,c.Z)(e.payload),t=[];n.forEach((function(e){return t.push({id:e.id,name:e.name,email:e.email,contact:e.contact,guestno:e.people,reserveDate:Q()(e.date.seconds,"X").format("YYYY-MM-DD"),reserveTime:e.time,promotion:"",reserveStatus:"confirm"===e.confirm?"Confirmed":"waiting"===e.confirm?"Waiting Confirm":"Cancel",request:e.request,calendar:e.calendarId})})),r(t)}),[e.payload]),(0,s.jsx)(l.Fragment,{children:(0,s.jsx)(d.ZP,{children:(0,s.jsx)(ae,{data:t})})})};se.getInitialProps=(0,o.Z)(a().mark((function e(){var n,t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.T)();case 2:return n=e.sent,t=n.firestore(),r=[],e.next=7,t.collection("reservation").orderBy("date","asc").get().then((function(e){e.forEach((function(e){r.push(oe({id:e.id},e.data()))}))})).catch((function(e){}));case 7:return e.sent,e.abrupt("return",{payload:r});case 9:case"end":return e.stop()}}),e)})));var ce=se},81976:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(91062)}])}},function(e){e.O(0,[883,239,885,143,472,593,956,749,152,257,614,774,888,179],(function(){return n=81976,e(e.s=n);var n}));var n=e.O();_N_E=n}]);